@inject IHttpContextAccessor HttpContextAccessor

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - Car Rental Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body>
    <div class="d-flex" id="wrapper">
        <!-- Sidebar -->
        <div class="bg-dark border-end text-white" id="sidebar-wrapper">
            <div class="sidebar-heading p-3 fs-4 fw-bold">CarRental</div>
            <div class="list-group list-group-flush">
                @{
                    // Retrieve roles from session
                    var rolesString = HttpContextAccessor.HttpContext.Session.GetString("UserRoles");
                    var roles = rolesString?.Split(',');

                    if (roles != null && roles.Contains("Admin"))
                    {
                        <a asp-controller="Dashboard" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Dashboard</a>
                        <a asp-controller="Car" asp-action="AdminIndex" class="list-group-item list-group-item-action bg-dark text-white">Manage Cars</a>
                        <a asp-controller="Rental" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">All Rentals</a>
                        //<a asp-controller="Payment" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Payments</a>
                        <a asp-controller="SystemSetting" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">System Settings</a>
                        <a asp-controller="Auth" asp-action="Logout" class="list-group-item list-group-item-action bg-dark text-white">Logout</a>
                    }
                    else if (roles != null && roles.Contains("User"))
                    {
                        <a asp-controller="Dashboard" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Dashboard</a>
                        <a asp-controller="Car" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Available Cars</a>
                        <a asp-controller="Rental" asp-action="MyRentals" class="list-group-item list-group-item-action bg-dark text-white">My Rentals</a>
                        // <a asp-controller="Payment" asp-action="MyPayments" class="list-group-item list-group-item-action bg-dark text-white">My Payments</a>
                        <a asp-controller="Auth" asp-action="Logout" class="list-group-item list-group-item-action bg-dark text-white">Logout</a>
                    }
                }

            </div>
        </div>

        <!-- Page content wrapper -->
        <div id="page-content-wrapper" class="w-100 p-4">
            @RenderBody()
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>